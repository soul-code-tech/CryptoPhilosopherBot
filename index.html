<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìà –¢—Ä–µ–π–¥–∏–Ω–≥ –ë–æ—Ç –í–∞—Å—è 3000 –£–Ω–∏–∫–∞–ª—å–Ω—ã–π</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#f8a5c2">
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">

    <style>
        :root {
            --long-color: #2ecc71;
            --short-color: #e74c3c;
            --neutral-color: #3498db;
        }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #e0e0e0; 
            padding: 20px; 
            max-width: 1400px; 
            margin: 0 auto; 
        }
        h1, h2, h3 { 
            color: #f8a5c2; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            text-align: center;
        }
        .header { 
            text-align: center; 
            margin-bottom: 30px; 
            padding: 25px; 
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        .section { 
            background: rgba(255,255,255,0.08); 
            backdrop-filter: blur(10px);
            padding: 30px; 
            border-radius: 20px; 
            margin-bottom: 30px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.3s ease;
        }
        .section:hover {
            transform: translateY(-5px);
        }
        .stats-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
            gap: 25px; 
            margin: 30px 0; 
        }
        .stat-card { 
            background: rgba(255,255,255,0.1); 
            padding: 25px; 
            border-radius: 15px; 
            text-align: center; 
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            background: rgba(255,255,255,0.15);
            transform: scale(1.05);
        }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 30px 0; 
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        th, td { 
            padding: 18px; 
            text-align: left; 
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        th { 
            background: rgba(0,0,0,0.3); 
            font-weight: bold;
            color: #f8a5c2;
        }
        tr:nth-child(even) { 
            background: rgba(0,0,0,0.1);
        }
        tr:hover { 
            background: rgba(255,255,255,0.1);
        }
        .log-entry { 
            background: rgba(0,0,0,0.2); 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 10px; 
            font-family: monospace; 
            border-left: 5px solid var(--neutral-color);
            transition: all 0.3s ease;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .log-entry:hover {
            background: rgba(0,0,0,0.3);
        }
        .deposit-section { 
            text-align: center; 
            margin: 30px 0; 
        }
        input, button { 
            padding: 15px 25px; 
            margin: 10px; 
            border-radius: 10px; 
            border: 2px solid rgba(255,255,255,0.3); 
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        input { 
            background: rgba(0,0,0,0.2); 
            color: white;
        }
        input:focus {
            outline: none;
            border-color: #f8a5c2;
            box-shadow: 0 0 10px rgba(248, 165, 194, 0.5);
        }
        button { 
            background: linear-gradient(45deg, #f8a5c2, #a3c7e7); 
            color: white; 
            cursor: pointer; 
            box-shadow: 0 5px 15px rgba(248, 165, 194, 0.4);
        }
        button:hover { 
            background: linear-gradient(45deg, #e74c3c, #f8a5c2);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(248, 165, 194, 0.6);
        }
        .progress-bar-container { 
            margin: 20px 0; 
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 15px;
        }
        .progress-bar { 
            height: 30px; 
            background: rgba(0,0,0,0.4); 
            border-radius: 15px; 
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1); 
            border-radius: 15px; 
            transition: width 0.5s ease;
            position: relative;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        .probability-tag {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
        }
        .side-tag {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--neutral-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .side-long {
            background: var(--long-color);
        }
        .side-short {
            background: var(--short-color);
        }
        .profit-positive {
            color: var(--long-color);
            font-weight: bold;
        }
        .profit-negative {
            color: var(--short-color);
            font-weight: bold;
        }
        .status-bar {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            font-size: 18px;
            color: #f8a5c2;
            border: 1px solid rgba(248, 165, 194, 0.5);
        }
        .menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .menu-item {
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .menu-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-3px);
        }
        .menu-item.active {
            background: rgba(248, 165, 194, 0.3);
            color: #f8a5c2;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìà –¢—Ä–µ–π–¥–∏–Ω–≥ –ë–æ—Ç –í–∞—Å—è 3000 –£–Ω–∏–∫–∞–ª—å–Ω—ã–π</h1>
        <p><em>–§–∏–ª–æ—Å–æ—Ñ–∏—è + —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç + –ø–ª–µ—á–æ = –ø—Ä–∏–±—ã–ª—å</em></p>
    </div>

    <div class="menu">
        <div class="menu-item active" onclick="showSection('dashboard')">üìä –ü–∞–Ω–µ–ª—å</div>
        <div class="menu-item" onclick="showSection('analysis')">üß† –ê–Ω–∞–ª–∏–∑</div>
        <div class="menu-item" onclick="showSection('history')">üìú –ò—Å—Ç–æ—Ä–∏—è</div>
        <div class="menu-item" onclick="showSection('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
    </div>

    <div id="dashboard" class="section">
        <h2>üíº –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–æ–º</h2>
        <div class="deposit-section">
            <input type="number" id="depositAmount" placeholder="–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è" step="1" min="1">
            <button onclick="depositFunds()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
        </div>
        <div id="balanceDisplay">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: $0.00</div>
        <h3>üìä –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏</h3>
        <div id="openPositions">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div id="analysis" class="section">
        <h2>üß† –õ–æ–≥ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞</h2>
        <div class="status-bar" id="statusBar">–í–∞—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Ä—ã–Ω–æ–∫...</div>
        <div id="philosophyLog">–û–∂–∏–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞...</div>
    </div>

    <div id="history" class="section">
        <h2>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div>–°–¥–µ–ª–æ–∫ –≤—Å–µ–≥–æ</div>
                <div id="totalTrades">0</div>
            </div>
            <div class="stat-card">
                <div>Win Rate</div>
                <div id="winRate">0.0%</div>
            </div>
            <div class="stat-card">
                <div>–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å</div>
                <div id="totalProfit">$0.00</div>
            </div>
            <div class="stat-card">
                <div>–ú–∞–∫—Å. –ø—Ä–æ—Å–∞–¥–∫–∞</div>
                <div id="maxDrawdown">0.0%</div>
            </div>
            <div class="stat-card">
                <div>–ú–∞–∫—Å. –ø–ª–µ—á–æ</div>
                <div id="maxLeverage">1x</div>
            </div>
            <div class="stat-card">
                <div>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                <div id="currentBalance">$0.00</div>
            </div>
        </div>

        <h2>üéØ –ü—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫</h2>
        <div id="progressDisplay">–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π</div>

        <h2>üìú –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫</h2>
        <table>
            <thead>
                <tr>
                    <th>–í—Ä–µ–º—è</th>
                    <th>–ú–æ–Ω–µ—Ç–∞</th>
                    <th>–¢–∏–ø</th>
                    <th>–ü–ª–µ—á–æ</th>
                    <th>–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞</th>
                    <th>–¶–µ–Ω–∞ –≤—ã—Ö–æ–¥–∞</th>
                    <th>–ü—Ä–∏–±—ã–ª—å</th>
                </tr>
            </thead>
            <tbody id="tradeHistory">
                <tr><td colspan="7">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</td></tr>
            </tbody>
        </table>
    </div>

    <div id="settings" class="section" style="display: none;">
        <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        <div>
            <button onclick="sendTestNotification()">üîî –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
            <p>–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ</p>
        </div>
    </div>

    <script>
        let lastLog = '';
        let currentSection = 'dashboard';

        function showSection(sectionId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('analysis').style.display = 'none';
            document.getElementById('history').style.display = 'none';
            document.getElementById('settings').style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
            document.getElementById(sectionId).style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            currentSection = sectionId;
        }

        async function updateState() {
            try {
                const response = await fetch('/api/state');
                const state = await response.json();

                // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
                document.getElementById('balanceDisplay').innerText = `–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: $${state.balance.toFixed(2)}`;
                document.getElementById('currentBalance').innerText = `$${state.balance.toFixed(2)}`;

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                document.getElementById('totalTrades').innerText = state.stats.totalTrades;
                document.getElementById('winRate').innerText = `${state.stats.winRate.toFixed(1)}%`;
                document.getElementById('totalProfit').innerText = `$${state.stats.totalProfit.toFixed(2)}`;
                document.getElementById('maxDrawdown').innerText = `${state.stats.maxDrawdown.toFixed(1)}%`;
                document.getElementById('maxLeverage').innerText = `${state.stats.maxLeverageUsed}x`;

                // –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
                let positionsHtml = '';
                let hasOpen = false;
                for (const [coin, position] of Object.entries(state.positions)) {
                    if (position && position.side) {
                        hasOpen = true;
                        positionsHtml += `<div>‚Üí ${coin}: ${position.side} ${position.size?.toFixed(6) || '?'} @ $${position.entryPrice?.toFixed(2) || '?'}</div>`;
                    }
                }
                document.getElementById('openPositions').innerHTML = hasOpen ? positionsHtml : '–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π';

                // –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–¥–µ–ª–æ–∫
                let progressHtml = '';
                state.history.forEach(trade => {
                    if (trade.status === 'OPEN') {
                        const progress = Math.random() * 100;
                        const probability = Math.min(95, Math.max(20, progress * 0.8));
                        const isLong = trade.type === 'LONG';
                        
                        progressHtml += `
                            <div class="progress-bar-container">
                                <div style="font-weight: bold; margin-bottom: 10px;">
                                    ${trade.coin} ‚Äî ${trade.type} (–ü–ª–µ—á–æ: ${trade.leverage}x)
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${progress}%;"></div>
                                    <div class="probability-tag">${probability.toFixed(0)}%</div>
                                    <div class="side-tag side-${isLong ? 'long' : 'short'}">${trade.type}</div>
                                </div>
                                <div style="margin-top: 10px; font-size: 14px;">
                                    –í—Ö–æ–¥: $${trade.entryPrice?.toFixed(2) || 'N/A'} | –°—Ç–æ–ø: $${trade.stopLoss?.toFixed(2) || 'N/A'} | –¢–µ–π–∫: $${trade.takeProfit?.toFixed(2) || 'N/A'}
                                </div>
                            </div>
                        `;
                    }
                });
                document.getElementById('progressDisplay').innerHTML = progressHtml || '–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π';

                // –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫
                let historyHtml = '';
                state.history.slice(-15).forEach(trade => {
                    const profit = trade.profitPercent ? `${(trade.profitPercent * 100).toFixed(2)}%` : '-';
                    const profitClass = trade.profitPercent > 0 ? 'profit-positive' : trade.profitPercent < 0 ? 'profit-negative' : '';
                    
                    historyHtml += `
                        <tr>
                            <td>${trade.timestamp}</td>
                            <td>${trade.coin}</td>
                            <td><span class="side-tag side-${trade.type === 'LONG' ? 'long' : 'short'}">${trade.type}</span></td>
                            <td>${trade.leverage || '1'}x</td>
                            <td>$${trade.entryPrice?.toFixed(2) || 'N/A'}</td>
                            <td>$${trade.exitPrice?.toFixed(2) || 'N/A'}</td>
                            <td class="${profitClass}">${profit}</td>
                        </tr>
                    `;
                });
                document.getElementById('tradeHistory').innerHTML = historyHtml || '<tr><td colspan="7">–ù–µ—Ç —Å–¥–µ–ª–æ–∫</td></tr>';

                // –õ–æ–≥ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ ‚Äî –û–ë–ù–û–í–õ–Ø–ï–¢–°–Ø –ö–ê–ñ–î–´–ï 3 –°–ï–ö–£–ù–î–´!
                const now = new Date().toLocaleTimeString();
                let logHtml = '';
                
                if (state.stats.totalTrades === 0 && lastLog !== 'init') {
                    logHtml = `<div class="log-entry">[${now}] ‚ö™ –í–∞—Å—è 3000 –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä—ã–Ω–æ–∫ —Å —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è...</div>`;
                    lastLog = 'init';
                } else if (state.stats.totalTrades > 0 && lastLog !== 'trade') {
                    logHtml = `<div class="log-entry">[${now}] üíé –í–ê–°–Ø 3000 –ù–ê–®–Å–õ –£–ù–ò–ö–ê–õ–¨–ù–£–Æ –í–û–ó–ú–û–ñ–ù–û–°–¢–¨: –∑–∞–∫–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏ + —ç—Ñ—Ñ–µ–∫—Ç –±–∞–±–æ—á–∫–∏</div>`;
                    lastLog = 'trade';
                } else {
                    logHtml = `<div class="log-entry">[${now}] üîç –í–∞—Å—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä—ã–Ω–æ–∫...</div>`;
                }

                document.getElementById('philosophyLog').innerHTML = logHtml;
                document.getElementById('statusBar').innerText = `–í–∞—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Ä—ã–Ω–æ–∫... –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ${now}`;

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:', error);
                document.getElementById('statusBar').innerText = `–í–∞—Å—è –æ—Ç–¥—ã—Ö–∞–µ—Ç... –û—à–∏–±–∫–∞: ${error.message}`;
            }
        }

        async function depositFunds() {
            const amount = parseFloat(document.getElementById('depositAmount').value);
            if (isNaN(amount) || amount <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É (–º–∏–Ω–∏–º—É–º $1)');
                return;
            }

            try {
                const response = await fetch('/api/deposit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ amount })
                });

                const result = await response.json();
                if (result.success) {
                    alert(`–ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω! –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: $${result.balance.toFixed(2)}`);
                    updateState();
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + result.message);
                }
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function sendTestNotification() {
            if (Notification.permission === 'granted') {
                navigator.serviceWorker.ready.then(reg => {
                    reg.showNotification('–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç –í–∞—Å–∏ 3000', {
                        body: '–ï—Å–ª–∏ –≤—ã —ç—Ç–æ –≤–∏–¥–∏—Ç–µ ‚Äî Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç!',
                        icon: '/icon-192.png',
                        vibrate: [200, 100, 200]
                    });
                });
            } else {
                alert('–°–Ω–∞—á–∞–ª–∞ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ!');
            }
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä–∞
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => {
                        console.log('‚úÖ SW –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', reg.scope);
                        
                        // –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                        Notification.requestPermission().then(permission => {
                            if (permission === 'granted') {
                                console.log('üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã');
                            }
                        });
                    })
                    .catch(err => console.log('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ SW:', err));
            });
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã ‚Äî –†–ï–ê–õ–¨–ù–û–ï –í–†–ï–ú–Ø!
        setInterval(updateState, 3000);
        updateState(); // –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
    </script>
</body>
</html>
